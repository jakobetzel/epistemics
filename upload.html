<!DOCTYPE html>
<html lang="en">
<head>
    <title>Epistemics | Persons Intelligence for Legal Business</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- data -->
    <script type="text/javascript" src="data/AT/legal_entities.js"></script>
    <script type="text/javascript" src="data/AT/natural_persons.js"></script>
    <script type="text/javascript" src="data/DE/legal_entities.js"></script>
    <script type="text/javascript" src="data/DE/natural_persons.js"></script>
    <script type="text/javascript" src="data/UA/legal_entities.js"></script>
    <script type="text/javascript" src="data/UA/natural_persons.js"></script>
    <script type="text/javascript" src="data/contracts/contracts.js"></script>
    <script type="text/javascript" src="data/data_munging.js"></script>

    <!-- vis.js -->
    <script type="text/javascript" src="node_modules/vis/dist/vis.js"></script>
    <link rel="stylesheet" href="node_modules/vis/dist/vis.css" type="text/css" />

    <!-- JQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>

    <!-- Bootstrap -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js" integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js" integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ" crossorigin="anonymous"></script>

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">

    <link rel="stylesheet" href="style.css" type="text/css" />
    <script type="text/javascript" src='graph.js'></script>
    <script type="text/javascript" src="data/contracts/contracts.js"></script>
    <script type="text/javascript">
        $(document).ready(function() {
//            var url_string = window.location.href;
//            var url = new URL(url_string);
//            var c = url.searchParams.get("c");
//            var contract = contracts[c];
//            $('#contract').attr('data', 'data/contracts/' + contract['file']);
//            var list = document.getElementById('entitiesList');
//            for(var i = 0; i < contract['entities'].length; i++) {
//                var item = document.createElement('li');
//                var entity = entities[contract['entities'][i]['country']][contract['entities'][i]['type']][contract['entities'][i]['id']];
//                item.appendChild(document.createTextNode(
//                    entity['name'] + " (" +
//                    (contract['entities'][i]['type'] == "le" ? "legal entity" : "natural person") + ")"
//                ));
//                list.appendChild(item);
//            }
        });
        $('#input_pdf').on('change', function () {
            console.log("preseed");
            var reader = new FileReader();
            reader.onload = function (e) {
                console.log(reader.result + '->' + typeof reader.result);
                var thisPdf = reader.result;
                localStorage.setItem("uploaded.pdf", thisPdf);
                console.log("success");
                $('#contract').attr('data', 'uploaded.pdf');
            };
            reader.readAsDataURL(this.files[0]);
            $('#contract').attr('data', 'uploaded.pdf');
        });
    </script>
</head>
<body>
<div id='dialog' title='Relationship Graph'>
    <div id="relationship_graph"></div>
</div>
<header class="container-fluid">
    <h1>Epistemics Persons Intelligence</h1>
    <ul class="breadcrumb">
        <li class="breadcrumb-item"><a href="upload.html">Upload Demo</a></li>
    </ul>
</header>
<div class="container-fluid">
    <div class="row content">
        <div class="col-sm-8">
            <object id="contract" data="" type="application/pdf" width="100%" height="2000px">
                alt : This document could not be shown.
            </object>
        </div>
        <div class="col-sm-4 sidenav">
            Please, upload a pdf document: <input id="input_pdf" type="file"> <br/>
            <h3>Entities detected</h3>
            <div class="input-group">
                <input type="text" class="form-control" placeholder="Search entities...">
                <span class="input-group-btn">
							<button class="btn btn-default" type="button">
								<span class="glyphicon glyphicon-search"></span>
							</button>
						</span>
            </div>
            <ol id='entitiesList'>
            </ol>
            <h3>Detailed information<h3>
                ...
        </div>
    </div>
</div>
<!--<footer >-->
<!--<p>Copyright 2017 Jakob Etzel</p>-->
<!--</footer>-->
</body>
</html>
